/*! Entersoft Application Server WEB API - v3.0.2 - 2022-01-11
* Copyright (c) 2022 Entersoft SA; Licensed Apache-2.0 */
!function(){"use strict";function a(a,b){return-1!==a.indexOf(b,a.length-b.length)}function b(a,b){return 0===a.toLowerCase().indexOf(b.toLowerCase())}var c=angular.module("es.Services.Web",["ngStorage"]);c.constant("ESWEBAPI_URL",{__LOGIN__:"api/Login/Login",__VALIDATE_USER__:"api/Login/ValidateUser",__TOKEN__:"api/Login/validateToken",__LOGOUT__:"api/Login/Logout",__CHG_PWD__:"api/Login/ChangePassword",__USER_LOGO__:"api/Login/UserLogo/",__REMOVE_USER_LOGO__:"api/Login/RemoveUserLogo/",__REMOVE_ENTITY_BLOB__:"api/Login/RemoveEntityBlob/",__PERSON_LOGO__:"api/rpc/personLogo/",__POST_USER_LOGO__:"api/Login/UpdateUserLogo/",__POST_ENTITY_BLOB__:"api/Login/UpdateEntityBlob/",__EVENTLOG__:"api/rpc/EventLog/",__PUBLICQUERY__:"api/rpc/PublicQuery/",__MULTI_PULIC_QUERY__:"api/rpc/MultiPublicQuery/",__PUBLICQUERY_INFO__:"api/rpc/PublicQueryInfo/",__USERSITES__:"api/Login/Usersites",__STANDARD_ZOOM__:"api/rpc/FetchStdZoom/",__MULTI_STANDARD_ZOOM__:"api/rpc/MultiFetchStdZoom/",__SCROLLERROOTTABLE__:"api/rpc/SimpleScrollerRootTable/",__SCROLLER__:"api/rpc/SimpleScroller/",__ENTITYACTION__:"api/Entity/",__REGISTERED_ENDPOINT_FOR_TYPE__:"api/endpoint/RegisteredEndpointFor",__ENTITYBYGIDACTION__:"api/EntityByGID/",__ELASTICSEARCH__:"api/esearch/",__SEND_SMS__:"api/collaboration/SendSMS/",__SERVER_CAPABILITIES__:"api/Login/ServerCapabilities/",__FETCH_COMPANY_PARAM__:"api/rpc/FetchCompanyParam/",__GET_PARAMETER_VALUE__:"api/rpc/ParameterValue/",__FETCH_COMPANY_PARAMS__:"api/rpc/FetchCompanyParams/",__SCROLLER_COMMAND__:"api/rpc/ScrollerCommand/",__FORM_COMMAND__:"api/rpc/FormCommand/",__EBS_SERVICE__:"api/rpc/EbsService/",__FETCH_SESSION_INFO__:"api/rpc/FetchSessionInfo/",__FETCH_ODS_TABLE_INFO__:"api/rpc/FetchOdsTableInfo/",__FETCH_ODS_COLUMN_INFO__:"api/rpc/FetchOdsColumnInfo/",__FETCH_ODS_RELATION_INFO__:"api/rpc/FetchOdsRelationInfo/",__FETCH_ODS_DETAIL_RELATIONS_INFO__:"api/rpc/FetchOdsDetailRelationsInfo/",__FETCH_ODS_MASTER_RELATIONS_INFO__:"api/rpc/FetchOdsMasterRelationsInfo/",__FI_IMPORTDOCUMENT___:"api/rpc/FIImportDocument/",__FETCH_ENTITY__:"api/rpc/fetchEntity/",__FETCH_ENTITY_BY_CODE__:"api/rpc/fetchEntityByCode/",__FETCH_ESPROPERTY_SET__:"api/rpc/fetchPropertySet/",__FETCH_ESSCALE__:"api/rpc/fetchESScale/",__FETCH_WEB_EAS_ASSET__:"api/asset/",__DOWNLOAD_WEB_EAS_ASSET__:"api/asset2/downloadAsset/",__FETCH_ES00DOCUMENT_BY_GID__:"api/ES00Documents/InfoByGID/",__FETCH_ES00DOCUMENT_BY_CODE__:"api/ES00Documents/InfoByCode/",__FETCH_ES00DOCUMENT_BY_ENTITYGID__:"api/ES00Documents/InfoByEntityGid/",__FETCH_ES00DOCUMENT_BLOBDATA_BY_GID__:"api/ES00Documents/BlobDataByGID/",__DOWNLOAD_ES00DOCUMENT_BLOBDATA_BY_GID__:"api/ES00Documents/DownloadBlobDataByGID/",__DOWNLOAD_ES00BLOB_BY_GID__:"api/ES00Documents/GetES00Blob/",__DOWNLOAD_ES00BLOB_BY_OBJECT__:"api/ES00Documents/GetES00BlobFromObject/",__FETCH_ES00DOCUMENT_MIME_TYPES__:"api/ES00Documents/ESMimeTypes/",__DELETE_ES00DOCUMENT__:"api/ES00Documents/DeleteES00Document/",__ADD_OR_UPDATE_ES00DOCUMENT_BLOBDATA__:"api/ES00Documents/AddOrUpdateES00DocumentBlobData/",__EXPORT_PROXY_SAVEFILE__:"api/export/savefile/",__FETCH_ES00DEVICE__:"api/device/fetchDevice/",__GET_BODY_FROM_ES00BLOB__:"api/ES00Documents/GetBodyFromES00Blob/",__POST_BODY_TO_ES00BLOB__:"api/ES00Documents/PostBodyToES00Blob/"}),c.value("__WEBAPI_RT__",{url:""}),c.provider("esWebApi",function(){var c="",d="",e="",f={},g={host:"",allowUnsecureConnection:!1,subscriptionId:"",subscriptionPassword:"",bridgeId:"",additionalHeaders:{}};return{getSettings:function(){return g},getServerUrl:function(){return c},setSettings:function(h){var i="https://",j="http://";if(g=h,!g.host)throw new Error("host for Entersoft WEB API Server is not specified");if(g.host=g.host.trim(),b(g.host,i)?g.host=g.host.slice(i.length).trim():b(g.host,j)&&(g.host=g.host.slice(j.length).trim()),""==g.host)throw new Error("host for Entersoft WEB API Server is not specified");return a(g.host,"/")||(g.host+="/"),d=j+g.host,e=i+g.host,f=g.additionalHeaders,c=g.allowUnsecureConnection?d:e,this},$get:["$http","$log","$q","$timeout","$rootScope","$injector","ESWEBAPI_URL","esGlobals","esMessaging","esCache",function(a,b,d,h,i,j,k,l,m,n){function o(a){var b=a||{Authorization:l.getWebApiToken()};return angular.extend(b,f),b}function p(a,d){if(a){var e=angular.copy(a);try{$.ajax({type:"POST",url:c.concat(k.__EVENTLOG__),contentType:"application/json",headers:o(),data:JSON.stringify({exceptionData:e,exceptionStore:d},null,"	")})}catch(f){b.warn("Error logging failed"),b.error(f)}}}function q(){var b=d.defer(),e=n.getItem("ES_MIME_TYPES");if(e)return h(function(){b.resolve(e)}),b.promise;var f=c.concat(k.__FETCH_ES00DOCUMENT_MIME_TYPES__),g={method:"GET",headers:o(),url:f},i=a(g);return v(i).then(function(a){n.setItem("ES_MIME_TYPES",a.data),b.resolve(a.data)},function(){b.reject(arguments)}),b.promise}function r(b){if(!b||!b.ScrollerID||!b.CommandID)throw new Error("ScrollerID and CommandID properties must be defined");var e=c.concat(k.__SCROLLER_COMMAND__);if(!(!window.ESIsB2B||b&&b.FTRAGID&&window.FTRAGID)){var f=d.defer();return f.reject(new Error("Trying to execute Scroller Command ["+b.ScrollerID+"/"+b.CommandID+"] with no parameter FTRAGID set is forbidden.")),v(f.promise)}var g=a({method:"post",headers:o(),url:e,data:b});return g}function s(b,e){var f=c+k[b]+e,g=d.defer(),i=n.getItem(f);if(i)return h(function(){g.resolve(i)}),g.promise;var j=a({method:"get",headers:o(),url:f});return v(j).then(function(a){n.setItem(f,a),g.resolve(a)},function(){g.reject(arguments)}),g.promise}function t(b){if(!b||!b.EntityID||!b.CommandID)throw new Error("EntityID and CommandID properties must be defined");var e=c+k.__FORM_COMMAND__;if(!(!window.ESIsB2B||b&&b.FTRAGID&&window.FTRAGID)){var f=d.defer();return f.reject(new Error("Trying to execute form command ["+b.EntityID+"/"+b.CommandID+"] with no parameter FTRAGID set is forbidden.")),v(f.promise)}var g=a({method:"post",headers:o(),url:e,data:b});return v(g)}function u(b,e,f,g){if(e=e?e.trim():"",f=f?f.trim():"",!(!window.ESIsB2B||g&&g.FTRAGID&&window.FTRAGID)){var h=d.defer();return h.reject(new Error("Trying to execute Scroller ["+e+"/"+f+"] with no parameter FTRAGID set is forbidden.")),v(h.promise)}var i=c.concat(b,e,"/",f),j=a({method:"GET",headers:o(),url:i,params:g});return v(j)}function v(a,c){if(!a)throw new Error("processWEBAPIToken can have parameter promise null or undefined");var d=function(a){var b;return a&&angular.isFunction(a.headers)&&(b=a.headers(),b&&b["x-es-refresh-token"]&&l.setWebApiToken(b["x-es-refresh-token"],a.config.url||"-")),a},e=function(a){throw d(a),a};return a=a.then(d)["catch"](e),a=a["catch"](function(a){var d=a.data||a;throw d?b.error(d):console.log("Generic Http error"),c||m.publish("ES_HTTP_CORE_ERR",d,a.status),a})}return{getServerUrl:function(){return c},getServerSettings:function(){return g},openSession:function(b,d){var e={SubscriptionID:b.subscriptionId||g.subscriptionId,SubscriptionPassword:b.subscriptionPassword||g.subscriptionPassword,BridgeID:b.bridgeId||g.bridgeId,ExtraPin:b.extraPin,Model:b,Claims:d||g.claims,IsExternal:b.IsExternal};b.StickySession&&(e.SessionSpec="*");var f=a({method:"post",url:c+k.__LOGIN__,headers:o({}),data:e}).then(function(a){return l.sessionOpened(a.data,b),a})["catch"](function(a){throw l.sessionClosed(),a});return v(f)},validateUser:function(b){if(!b)throw new Error("Parameter token cannot be empty");var d=a({method:"post",url:c+k.__VALIDATE_USER__,headers:o(),data:b}).then(function(a){return a})["catch"](function(a){throw a});return v(d)},validateToken:function(b,d){if(!b)throw new Error("Parameter token cannot be empty");var e=a({method:"post",url:c+k.__TOKEN__,headers:o({}),data:{webapitoken:b.startsWith("Bearer ")?b:"Bearer "+b}}).then(function(a){return l.sessionOpened(a.data,d),a})["catch"](function(a){throw l.sessionClosed(),a});return v(e)},eventLog:function(b){if(!b)throw new Error("esLog parameter cannot be empty");var d=a({method:"post",headers:o(),url:c+k.__EVENTLOG__,data:JSON.stringify(b)});return v(d)},ebsService:function(b,d){if(!(b&&b.netAssembly&&b.netNamespace&&b.netClass&&b.netMethod))throw new Error("serviceObj.netAssembly, serviceObj.netNamespace, serviceObj.netClass, serviceObj.netMethod properties MUST ALL have value");var e=b.netAssembly.concat("/",b.netNamespace,"/",b.netClass,"/",b.netMethod),f=d,g={method:"post",headers:o(),url:c.concat(k.__EBS_SERVICE__,e),data:f};b.netIsBinaryResult?(g.headers.Accept=void 0,g.responseType="arraybuffer"):g.contentType="application/json; charset=utf-8";var h=a(g);return v(h)},fetchUserLogo:function(b){var d=a({method:"get",headers:o(),url:c.concat(k.__USER_LOGO__,b||"")});return v(d)},uploadEntityBlob:function(a,b,d,e,f){if(!a||!a.ObjectID||!a.KeyID)throw new Error("blobInfo argument is null or one or more of the required properties [ObjectID, KeyID] are missing");if(!b)throw new Error("Invalid File");var g=j.get("Upload");if(!g)throw new Error("You have to include the ngFileUpload");return a.TypeID=a.TypeID||0,b.upload=g.upload({url:c.concat(k.__POST_ENTITY_BLOB__),method:"POST",headers:o(),fields:{esblobinfo:JSON.stringify(a)},file:b}),b.upload.then(function(a){h(function(){b.result=a.data,angular.isFunction(d)&&d(b)})},e),b.upload.progress(f),b.upload},uploadUserLogo:function(a,b,d,e){if(!a)throw new Error("Invalid File");var f=j.get("Upload");if(!f)throw new Error("You have to include the ngFileUpload");return a.upload=f.upload({url:c.concat(k.__POST_USER_LOGO__),method:"POST",headers:o(),file:a}),a.upload.then(function(c){h(function(){a.result=c.data,angular.isFunction(b)&&b(a)})},d),a.upload.progress(e),a.upload},removeEntityBlob:function(b){var d=b&&(b.GID||b.ObjectID&&b.KeyID);if(!d)throw new Error("blobInfo argument is null or one or more of the required properties [GID or (ObjectID and KeyID)] are missing");b.TypeID=b.TypeID||0;var e=a({method:"POST",headers:o(),url:c.concat(k.__REMOVE_ENTITY_BLOB__),data:b});return v(e)},removeCurrentUserLogo:function(){var b=a({method:"POST",headers:o(),url:c.concat(k.__REMOVE_USER_LOGO__)});return v(b)},fetchPersonLogo:function(b){if(!b)throw new Error("Invalid personGID");var d=a({method:"get",headers:o(),url:c.concat(k.__PERSON_LOGO__,b)});return v(d)},logout:function(){var b=o();l.sessionClosed(),n.clear();var d=a({method:"post",headers:b,url:c.concat(k.__LOGOUT__)});return d["catch"](function(a){})},changePassword:function(b){if(!(b&&b.OldPassword&&b.NewPassword&&b.NewPassword2))throw new Error("Invalid Arguments. Either Old Password, or New Password or Verify Password is empty");var d=o(),e=a({method:"post",headers:d,url:c.concat(k.__CHG_PWD__),data:b});return e.then(function(a){l.sessionClosed(),n.clear()})},fetchCompanyParam:function(b){if(!b)throw new Error("Invalid Paramter ID");var d=c.concat(k.__FETCH_COMPANY_PARAM__,b.replace(" ","")),e=a({method:"get",headers:o(),url:d});return v(e)},getParameterValue:function(b){if(!b)throw new Error("Invalid Paramter ID");var d=c.concat(k.__GET_PARAMETER_VALUE__,b.replace(" ","")),e=a({method:"get",headers:o(),url:d});return v(e,!0)},fetchCompanyParams:function(b,d){var e;e=b?angular.isArray(b)?c+k.__FETCH_COMPANY_PARAMS__+b.join("/").replace(/ /g,""):c+k.__FETCH_COMPANY_PARAMS__+b.replace(/,/g,"/").replace(/ /g,""):c+k.__FETCH_COMPANY_PARAMS__;var f=a({method:"get",headers:o(),url:e});return v(f,d)},execHttp:function(b){if(!b)return null;var c=a(b);return c},registerException:p,fetchOdsTableInfo:function(a){return a=a?a.trim():"",s("__FETCH_ODS_TABLE_INFO__",a)},fetchOdsColumnInfo:function(a,b){a=a?a.trim():"",b=b?b.trim():"";var c="";if(b)c=a+"/"+b;else{var d=a.split(".");c=2==d.length?d[0]+"/"+d[1]:a}return s("__FETCH_ODS_COLUMN_INFO__",c)},fetchOdsRelationInfo:function(a){return a=a?a.trim():"",s("__FETCH_ODS_RELATION_INFO__",a)},fetchOdsMasterRelationsInfo:function(a,b){return a=a?a.trim():"",b=b?b.trim():"",s("__FETCH_ODS_MASTER_RELATIONS_INFO__",a+"/"+b)},fetchOdsDetailRelationsInfo:function(a,b){return a=a?a.trim():"",b=b?b.trim():"",s("__FETCH_ODS_DETAIL_RELATIONS_INFO__",a+"/"+b)},fetchServerCapabilities:function(){var b=d.defer();return a.get(e+k.__SERVER_CAPABILITIES__).then(function(a){b.resolve(a.data)},function(a){b.reject([a.data,a.status,a.headers,a.config])}),b.promise},fetchScroller:function(a,b,c){return u(k.__SCROLLER__,a,b,c)},fetchSimpleScrollerRootTable:function(a,b,c){return u(k.__SCROLLERROOTTABLE__,a,b,c)},fetchUserSites:function(b,d){d=d||{};var e=a({method:"post",url:c+k.__USERSITES__,data:{SubscriptionID:d.subscriptionId||g.subscriptionId,SubscriptionPassword:d.subscriptionPassword||g.subscriptionPassword,BridgeID:d.bridgeId||g.bridgeId,Model:b}});return v(e)},fetchSessionInfo:function(){var b=a({method:"get",headers:o(),url:c+k.__FETCH_SESSION_INFO__});return v(b)},registeredEndpointForType:function(b){var d=a({method:"post",headers:o(),params:{EndpointType:b},url:c+k.__REGISTERED_ENDPOINT_FOR_TYPE__});return v(d)},executeNewEntityAction:function(b,d,e){var f=c.concat(k.__ENTITYACTION__,b,"/",d),g=a({method:"post",headers:o(),url:f,data:e});return v(g)},executeEntityActionByCode:function(b,d,e,f){var g=c.concat(k.__ENTITYACTION__,b,"/",d,"/",e),h=a({method:"post",headers:o(),url:g,data:f});return v(h)},executeEntityActionByGID:function(b,d,e,f){var g=c.concat(k.__ENTITYBYGIDACTION__,b,"/",d,"/",e),h=a({method:"post",headers:o(),url:g,data:f});return v(h)},executeFormCommand:function(a){return t(a)},executeFormCommandDS:function(a,b,c,d){var e={EntityID:a,CommandID:b,CommandParams:c};return d&&(e.EntityDataset=d),t(e)},executeScrollerCommandSRV:function(a,b,c,d,e){var f={ScrollerID:a+"/"+b,CommandID:c,ScrollerParams:d,CommandParams:e};return r(f)},executeScrollerCommandDS:function(a,b,c,d,e){var f={ScrollerID:a+"/"+b,CommandID:c,ScrollerDataset:d,CommandParams:e};return r(f)},fetchPublicQueryInfo:function(b,e,f,g){var i="";b instanceof l.ESPublicQueryDef?(i=(b.GroupID||"").trim(),e=(b.FilterID||"").trim()):(i=b?b.trim():"",e=e?e.trim():"");var j=c.concat(k.__PUBLICQUERY_INFO__,i,"/",e);g&&(j=j.concat("/true"));var m=d.defer();if(f){var p=n.getItem(j);if(p)return h(function(){m.resolve(p)}),m.promise}var q=a({method:"get",headers:o(),url:j});return v(q).then(function(a){f&&n.setItem(j,a),m.resolve(a)},function(){m.reject(arguments)}),m.promise},fetchStdZoom:function(b,e,f){b=b?b.trim():"",f=!e&&f;var g=d.defer();if(f){var i=n.getItem("ESZOOM_"+b);if(i)return h(function(){g.resolve(i)}),g.promise}var j=c.concat(k.__STANDARD_ZOOM__,b),m=a({method:"get",headers:o({Authorization:l.getWebApiToken(),"X-ESPQOptions":JSON.stringify(e)}),url:j}),p=v(m);return p.then(function(a){f&&n.setItem("ESZOOM_"+b,a),g.resolve(a)},function(){g.reject(arguments)}),g.promise},fetchMultiStdZoom:function(b){var e=d.defer(),f=[];b=b||[];var g=_.filter(b,function(a){return a.UseCache&&n.getItem("ESZOOM_"+a.ZoomID)?!1:!0});if(0==g.length)return h(function(){var a;for(a=0;a<b.length;a++)f.push(n.getItem("ESZOOM_"+b[a].ZoomID));e.resolve(f)}),e.promise;var i=c.concat(k.__MULTI_STANDARD_ZOOM__),j=a({method:"POST",headers:o(),data:g,url:i}),l=v(j);return l.then(function(a){var c=0;_.each(b,function(b){if(b.UseCache&&n.getItem("ESZOOM_"+b.ZoomID))f.push(n.getItem("ESZOOM_"+b.ZoomID));else{var d=a[c];c+=1,b.UseCache&&n.setItem("ESZOOM_"+b.ZoomID,d),f.push(d)}}),e.resolve(f)},function(){e.reject(arguments)}),e.promise},fetchPublicQuery:function(b,e,f,g,h){var i,j;if(b instanceof l.ESPublicQueryDef?(i=(b.GroupID||"").trim(),e=(b.FilterID||"").trim(),f=b.PQOptions,j=b.Params):(i=b?b.trim():"",e=e?e.trim():"",j=g),j&&j instanceof l.ESParamValues&&(j=j.getExecuteVals()),!(!window.esIsB2B||j&&j.FTRAGID&&window.FTRAGID)){var m=d.defer();return m.reject(new Error("Trying to execute a PQ with no FTRAGID parameter in PQ ["+b+"/"+e+"] is forbidden")),v(m.promise)}var n=c.concat(k.__PUBLICQUERY__,i,"/",e),p={headers:o(),url:n,params:j};f&&(p.headers["X-ESPQOptions"]=JSON.stringify(f)),p.method=h||"GET","GET"!==p.method&&(delete p.params,p.data=j);var q=a(p);return v(q)},multiPublicQuery:function(b){var d=c.concat(k.__MULTI_PULIC_QUERY__),e={headers:o(),url:d,method:"POST"};e.data=b;var f=a(e);return v(f)},fetchEASWebAsset:function(b,d,e){var f={base64:!1};d?(f.base64=!!d.base64,f.responseType=d.responseType,f.Accept=d.Accept,f.esonly=d.esonly||!1):(f.responseType="arraybuffer",f.esonly=!1);var g=c.concat(k.__FETCH_WEB_EAS_ASSET__),h={method:"GET",headers:o(),url:g,params:{routeId:b,base64:f.base64,esonly:f.esonly}};h.headers.Accept=f.Accept,f.responseType&&(h.responseType=f.responseType);var i=a(h);return v(i,e)},fetchEntity:function(b,d){if(!b||!d)throw new Error("Invalid parameters");var e=c.concat(k.__FETCH_ENTITY__,b,"/",d),f=a({method:"get",headers:o(),url:e});return v(f)},fetchEntityByCode:function(b,d){if(!b||!d)throw new Error("Invalid parameters");var e=c.concat(k.__FETCH_ENTITY_BY_CODE__,b,"/",d),f=a({method:"get",headers:o(),url:e});return v(f)},fetchPropertySet:function(b,d){if(!b)throw new Error("Invalid parameter");d&&(b=b+"/"+d);var e=c.concat(k.__FETCH_ESPROPERTY_SET__,b),f=a({method:"get",headers:o(),url:e});return v(f)},fetchESScale:function(b){var e=d.defer();if(!b)return e.reject("Invalid parameter"),e.promise;b=b.toLowerCase();var f=n.getItem("ESGOSCALE_"+b);if(f)return h(function(){e.resolve(f)}),e.promise;var g=c.concat(k.__FETCH_ESSCALE__,b),i=a({method:"get",headers:o(),url:g});return v(i,!0).then(function(a){n.setItem("ESGOSCALE_"+b,a.data),e.resolve(a.data)},function(){e.reject(arguments)}),e.promise},fiImportDocument:function(b){if(!b)throw new Error("xmldocstr is not a valid string");var d=c.concat(k.__FI_IMPORTDOCUMENT___),e=a({method:"post",headers:o(),url:d,data:b});return v(e)},downloadURLForBlobDataDownload:function(a){if(!a)return"";var b=c.concat(k.__DOWNLOAD_ES00DOCUMENT_BLOBDATA_BY_GID__,a);return b+="?webapitoken="+l.getWebApiToken()},userLogoUrl:function(a){var b=c.concat(k.__USER_LOGO__,a);return b+="?webapitoken="+l.getWebApiToken(),b+="&base64=false"},downloadES00BlobURLByGID:function(b,d,e){if(!b)return"";var f=c.concat(k.__DOWNLOAD_ES00BLOB_BY_GID__,b);if(f+="?webapitoken="+l.getWebApiToken(),d&&(f+="&extType="+d),!e)return f;var g=a({method:"get",headers:o(),url:f});return v(g,!0)},downloadES00BlobURLByObject:function(b,d,e,f,g,h){if(!b||!d||null==e||void 0==e)return"";var i=c.concat(k.__DOWNLOAD_ES00BLOB_BY_OBJECT__,b);if(i+="?keyid="+d,i+="&typeid="+e,i+="&webapitoken="+l.getWebApiToken(),f&&(i+="&extType="+f),g&&(i+="&ts="+Number(new Date)),!h)return i;var j=a({method:"get",headers:o(),url:i});return v(j,!0)},getBodyFromES00Blob:function(b,d,e){if(!b)throw new Error("invalid parameters");var f=c.concat(k.__GET_BODY_FROM_ES00BLOB__,b);d&&e&&(f+="?keyid="+d,f+="&typeid="+e);var g=a({method:"get",headers:o(),url:f});return v(g)},postBodyToES00Blob:function(b){if(!b||!b.ObjectID||!b.KeyID||null==b.TypeID||void 0==b.TypeID)throw new Error("invalid parameters");var d=c.concat(k.__POST_BODY_TO_ES00BLOB__),e=a({method:"post",headers:o(),url:d,data:b});return v(e)},downloadES00BlobByGID:function(b,d){if(!b)throw new Error("Invalid parameter es00documentGID");var e=c.concat(k.__DOWNLOAD_ES00BLOB_BY_GID__,b);d&&(e+="?extType="+d);var f={method:"GET",headers:o({Authorization:l.getWebApiToken(),Accept:void 0}),url:e,responseType:"arraybuffer"},g=a(f);return v(g)},downloadAssetURL:function(a){var b=c.concat(k.__DOWNLOAD_WEB_EAS_ASSET__,a);return b+="?base64=false&webapitoken="+l.getWebApiToken()},fetchES00DocumentBlobDataByGID:function(b){var d=c.concat(k.__FETCH_ES00DOCUMENT_BLOBDATA_BY_GID__,b),e={method:"GET",headers:o({Authorization:l.getWebApiToken(),Accept:void 0}),url:d,responseType:"arraybuffer"},f=a(e);return v(f)},getMimeTypes:q,fetchES00DocumentByGID:function(b){b=b?b.trim():"";var d=c.concat(k.__FETCH_ES00DOCUMENT_BY_GID__,b),e=a({method:"get",headers:o(),url:d});return v(e)},fetchES00DocumentByCode:function(b){b=b?b.trim():"";var d=c.concat(k.__FETCH_ES00DOCUMENT_BY_CODE__,b),e=a({method:"get",headers:o(),url:d});return v(e)},fetchES00DocumentsByEntityGID:function(b){b=b?b.trim():"";var d=c.concat(k.__FETCH_ES00DOCUMENT_BY_ENTITYGID__,b),e=a({method:"get",headers:o(),url:d});return v(e)},deleteES00Document:function(b){if(b=b||{},!(b.TableID&&b.TableName&&b.GID&&b.fGID))throw new Error("Invalid parameter. One or more of the properties TableID, TableName, fGID and GID are not specified");var d=c.concat(k.__DELETE_ES00DOCUMENT__),e=a({method:"post",headers:o(),url:d,data:b});return v(e)},proxyExportSaveFile:function(a){var b=c.concat(k.__EXPORT_PROXY_SAVEFILE__);return b+="?webapitoken="+l.getWebApiToken(),a&&(b+="&proxyType="+a),b},addOrUpdateES00Document:function(a,b,d,e,f){if(!b)throw new Error("Invalid File");var g=j.get("Upload");if(!g)throw new Error("You have to include the ngFileUpload");return b.upload=g.upload({url:c.concat(k.__ADD_OR_UPDATE_ES00DOCUMENT_BLOBDATA__),method:"POST",headers:o(),fields:{esdoc:JSON.stringify(a)},file:b}),b.upload.then(function(a){h(function(){b.result=a.data,d(b)})},e),b.upload.progress(f),b.upload},sendSMS:function(b){if(!b||!b.Body||0==(b.Recipients||[]).length)throw new Error("Invalid smsObject");var d=c.concat(k.__SEND_SMS__),e=a({method:"post",headers:o(),url:d,data:b});return v(e)},fetchDeviceInfo:function(b){if(!b)throw new Error("Invalid deviceCode");var d=c.concat(k.__FETCH_ES00DEVICE__,b),e=a({method:"get",headers:o(),url:d});return v(e)}}}]}})}(),function(){"use strict";var underscore=angular.module("underscore",[]);underscore.factory("_",function(){return window._});var version="3.0.2",vParts=_.map(version.split("."),function(a){return parseInt(a)}),esAngularAPIVer={Major:vParts[0],Minor:vParts[1],Patch:vParts[2]},esUISettings={mobile:void 0},esWebFramework=angular.module("es.Services.Web");esWebFramework.provider("esCache",function(){var a=null,b={capacity:Number.MAX_VALUE,storageMode:"memory"};return{setCapacity:function(a){angular.isNumber(a)?b.capacity=a:b.capacity=Number.MAX_VALUE},getCapacity:function(){return b.capacity},getSettings:function(){return b},setStorageSettings:function(a){b&&(b.storageMode=a||"memory")},$get:["$cacheFactory",function(c){return a=c("esCache",b),{getItem:function(b){return a.get(b)},setItem:function(b,c,d){a.put(b,c)},removeItem:function(b){a.remove(b)},clear:function(){a.removeAll()},stats:function(){return a.info()}}}]}}),esWebFramework.factory("esMessaging",function(){function a(){if(!arguments||arguments.Length<1)throw"Publishing events requires at least one argument for topic id";var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d[a]&&angular.forEach(d[a],function(c){try{c.apply(null,b)}catch(d){console.log("Error in messaging handler for topic ",a)}})}function b(a,b){return d[a]||(d[a]=[]),d[a].push(b),[a,b]}function c(a){var b=a[0];d[b]&&angular.forEach(d[b],function(c){c==a[1]&&d[b].splice(c,1)})}var d={},e={publish:a,subscribe:b,unsubscribe:c};return e}),esWebFramework.factory("esGeoLocationSrv",["$q","$window",function(a,b){function c(){var c=a.defer();return b.navigator.geolocation?b.navigator.geolocation.getCurrentPosition(function(a){c.resolve(a)},function(a){c.reject(a)}):c.reject("Geolocation not supported."),c.promise}return{getCurrentPosition:c}}]),esWebFramework.factory("esGlobals",["$translate","$rootScope","$sessionStorage","$log","esMessaging","esCache","$injector",function($translate,$rootScope,$sessionStorage,$log,esMessaging,esCache,$injector){function fGetesDateRangeOptions(a){if(!a||!dDateRangeClass[a])return esDateRangeOptions;var b=dDateRangeClass[a];if(!_.isArray(b)||0==b.length)return esDateRangeOptions;var c,d=[];for(c=0;c<b.length;c++)d[c]=esDateRangeOptions[b[c]];return d}function suggestESLanguageID(a){if(!a)return"en-US";var b=a.split("-")[0];if(!b)return"es-US";b=b.toLowerCase();var c=_.find(_esSupportedLanguages,function(a){return b==a.id.split("-")[0].toLowerCase()});return c?c.id:"en-US"}function esConvertGIDtoId(a){return a?"gid"+a.replace(/-/g,"_"):"gid"}function esConvertIDtoGID(a){return a?"gid"!=a.slice(0,"gid".length)?a:a.slice(3).replace(/_/g,"-"):""}function ESPropertySet(a){this.ps=a}function componentToHex(a){var b=a.toString(16);return 1==b.length?"0"+b:b}function rgbToHex(a){var b=(16711680&a)>>16,c=(65280&a)>>8,d=255&a;return"#"+componentToHex(b)+componentToHex(c)+componentToHex(d)}function ESPublicQueryDef(a,b,c,d,e,f,g){this.CtxID=a,this.GroupID=b,this.FilterID=c,this.PQOptions=d,this.Params=e,this.UIOptions=f,this.Title=void 0,angular.isUndefined(g)?this.esPanelOpen={status:!1}:angular.isObject(g)?this.esPanelOpen=g:this.esPanelOpen={status:!!g},this.initFromObj=function(a){var b=a||{};this.CtxID=b.CtxID,this.GroupID=b.GroupID,this.FilterID=b.FilterID,this.PQOptions=(new ESPQOptions).initFromObj(b.PQOptions),this.Params=b.Params,this.Title=b.Title,angular.isUndefined(b.esPanelOpen)?this.esPanelOpen={status:!1}:angular.isObject(b.esPanelOpen)?this.esPanelOpen=b.esPanelOpen:this.esPanelOpen={status:!!b.esPanelOpen},this.UIOptions=angular.merge({},b.UIOptions);for(var c in a)this.hasOwnProperty(c)||(this[c]=a[c]);return this}}function ESMultiZoomDef(a,b,c){this.ZoomID=a,this.PQOptions=b,this.UseCache=!!c}function ESPQOptions(a,b,c,d,e){this.Page=a||-1,this.PageSize=b||-1,this.WithCount=!!c,this.ServerPaging=angular.isUndefined(d)||null==d?!0:d,this.AutoExecute=!!e,this.getPageSizeForServer=function(){return this.ServerPaging?this.PageSize:-1},this.getPageSizeForUI=function(){return this.PageSize<1?20:this.PageSize},this.initFromObj=function(a){var b=a||{};return this.Page=b.Page||-1,this.PageSize=b.PageSize||-1,this.WithCount=!!b.WithCount,this.ServerPaging=angular.isUndefined(b.ServerPaging)||null==b.ServerPaging?!0:b.ServerPaging,this.AutoExecute=!!b.AutoExecute,this}}function ESParamVal(a,b,c){this.paramCode=a,this.paramValue=b,this.enumList=c,this.mandatory=!1}function ESBoolParamVal(a,b){ESParamVal.call(this,a,b)}function ESNumericParamVal(a,b){ESParamVal.call(this,a,b)}function ESStringParamVal(a,b){ESParamVal.call(this,a,b)}function ESDateRange(a,b,c,d){return{fromType:a,fromD:b,toType:c,toD:d}}function dateEval(pInfo,expr){function isActualDate(a){return a&&"1753/01/01"!=a&&"9999/01/01"!=a}var SpecificDate="SpecificDate",Month="Month",SixMonth="SixMonth",Week="Week",Year="Year",Quarter="Quarter",Day="Day",FiscalPeriod="FiscalPeriod",FiscalYear="FiscalYear",Bimonthly="Bimonthly";"ESDateRange(Day,0)"==expr&&(expr="ESDateRange(Day)");var dVal=eval(expr.replace(/#/g,'"')),esdate=new ESDateParamVal(pInfo.id),mD=moment(dVal,"YYYY/MM/DD");if(!dVal.fromType&&!dVal.toType&&!dVal.fromD&&!dVal.toD&&mD.isValid())return esdate.paramValue.dRange="1",esdate.paramValue.fromD=mD.toDate(),esdate;if(dVal.fromType==SpecificDate&&isActualDate(dVal.fromD)&&dVal.toType==SpecificDate&&isActualDate(dVal.toD))return esdate.paramValue.dRange="0",esdate.paramValue.fromD=new Date(dVal.fromD),esdate.paramValue.toD=new Date(dVal.toD),esdate;if(dVal.fromType==SpecificDate&&isActualDate(dVal.fromD))return esdate.paramValue.dRange="1",esdate.paramValue.fromD=new Date(dVal.fromD),esdate;var drOptions=fGetesDateRangeOptions(),elem=_.find(drOptions,function(a){return a.dValue==expr});if(!angular.isUndefined(elem))return esdate.paramValue.dRange=expr,esdate;var fD=calcActualDate(dVal.fromType,dVal.fromD,!0),tD=calcActualDate(dVal.toType||dVal.fromType,angular.isUndefined(dVal.toD)?dVal.fromD:dVal.toD,!1);return esdate.paramValue.dRange="0",esdate.paramValue.fromD=fD,esdate.paramValue.toD=tD,esdate}function calcActualDate(a,b,c){switch(a){case"Year":return c?(b>0&&(b-=1),moment().add(b,"years").startOf("year").toDate()):moment().add(b,"years").endOf("year").toDate();case"Month":return c?moment().startOf("month").add(b,"months").toDate():moment().endOf("month").add(b,"months").toDate();case"Week":return c?moment().startOf("week").add(1,"days").add(b,"weeks").toDate():moment().endOf("week").add(1,"days").add(b,"weeks").toDate();case"Day":return moment().add(b,"days").toDate();case"Quarter":return c?(b>0&&(b-=1),moment().startOf("quarter").add(b,"quarters").toDate()):moment().endOf("quarter").add(b,"quarters").endOf("quarter").toDate();case"SixMonth":return calcActualDate("Quarter",c?2*b:2*b+1,c);default:return alert("ESDateRange option NOT Supported. ["+a+", "+b+", "+c+"]. Using Current Month instead"),c?moment().startOf("month").toDate():moment().endOf("month").toDate()}}function ESDateParamVal(a,b){b?angular.isString(b)&&(b=dateEval({id:a},b).pValue()):b={dRange:"ESDateRange(SpecificDate, #9999/01/01#, SpecificDate, #1753/01/01#)",fromD:null,toD:null},ESParamVal.call(this,a,b)}function ESParamValues(a){this.setParamValues(a)}function fgetModel(){if(!esClientSession.connectionModel){var a=$sessionStorage,b=null;"undefined"!=typeof a.__esrequest_sesssion&&null!==a.__esrequest_sesssion?(b=a.__esrequest_sesssion,esClientSession.connectionModel=b,esMessaging.publish("AUTH_CHANGED",esClientSession,getAuthToken(b)),$log.info("RELOGIN User ",esClientSession.connectionModel.Name)):(esMessaging.publish("AUTH_CHANGED",null,getAuthToken(null)),$log.info("NO RELOGIN from stored state"))}return esClientSession.connectionModel}function fsetModel(a){var b=null;esClientSession.connectionModel&&(b=esClientSession.connectionModel.GID),esClientSession.connectionModel=a,a?$sessionStorage.__esrequest_sesssion=a:delete $sessionStorage.__esrequest_sesssion,esMessaging.publish("AUTH_CHANGED",esClientSession,getAuthToken(a))}function getUserMessage(a,b){var c={isLogin:!1,messageToShow:""};if(a&&!_.isString(a)&&_.isArrayLike(a)&&(a=a[0]),!a){switch(b){case 401:c.isLogin=!0,c.messageToShow=$translate.instant("ERR_401");break;case 403:c.isLogin=!0,c.messageToShow=$translate.instant("ERR_403");break;case 500:default:c.isLogin=!0,c.messageToShow=$translate.instant("ERR_500")}return c}if(a instanceof ArrayBuffer)try{a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(a)))}catch(d){}if(c.isLogin=401==a.status||403==a.status||401==b||403==b,a.data&&a.data instanceof ArrayBuffer)try{a.data=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(a.data)))}catch(d){}var e="";if(a=a.data||a,a.UserMessage){if(e=a.UserMessage,a.MessageID){var f="ERR_"+a.MessageID,g=$translate.instant(f);e=g!=f?g:e+" ("+a.MessageID+")"}c.messageToShow=e}if(a.Messages){if(angular.isArray(a.Messages)){var h=0;e=_.reduce(a.Messages,function(a,b){return a+"\r\n["+ ++h+"] "+b},"")}else e=a.Messages;return c.messageToShow=c.messageToShow?c.messageToShow+"\r\n":c.messageToShow,e?c.messageToShow+=e:c.messageToShow||(c.messageToShow=$translate.instant("ERR_GENERAL")),c}return c.messageToShow=c.messageToShow||a.Message||a.toString(),c}function getAuthToken(a){return a?"Bearer "+a.WebApiToken:""}function getMimeTypes(){return mimes}function requiredEBSVersion(a,b){if(!b)return!0;if(!a)return!1;a=a.replace(" - ",".");var c=_.map(a.split("."),function(a){return parseInt(a.trim())}),d=_.map(b.split("."),function(a){return parseInt(a.trim())});if(c.length!=d.length&&4!=d.length)return!1;var e;for(e=0;4>e;e++){if(c[e]<d[e])return!1;if(c[e]>d[e])return!0}return!0}var esDateRangeOptions=[],esComplexParamFunctionOptions=[],esYesNoTrans=[],esOperTrans=[];$rootScope.$on("$translateChangeSuccess",function(){esYesNoTrans=$translate.instant(["ESUI.BOOLEAN.YES","ESUI.BOOLEAN.NO"]),esOperTrans=$translate.instant(["ESCOMPLEX.EQ","ESCOMPLEX.NE","ESCOMPLEX.LT","ESCOMPLEX.LE","ESCOMPLEX.GT","ESCOMPLEX.GE","ESCOMPLEX.RANGE","ESCOMPLEX.NULL","ESCOMPLEX.NOTNULL","ESCOMPLEX.FROM","ESCOMPLEX.TO","ESDATE_RANGE.SDR","ESDATE_RANGE.SD","ESDATE_RANGE.ANY","ESDATE_RANGE.TODAY","ESDATE_RANGE.UTD","ESDATE_RANGE.SFTD","ESDATE_RANGE.YTD","ESDATE_RANGE.UTYD","ESDATE_RANGE.TMR","ESDATE_RANGE.SFTR","ESDATE_RANGE.CW","ESDATE_RANGE.PW","ESDATE_RANGE.NW","ESDATE_RANGE.CM","ESDATE_RANGE.PM","ESDATE_RANGE.NM","ESDATE_RANGE.SFM","ESDATE_RANGE.UEM","ESDATE_RANGE.SFLM","ESDATE_RANGE.UELM","ESDATE_RANGE.CQ","ESDATE_RANGE.PQ","ESDATE_RANGE.CSM","ESDATE_RANGE.PSM","ESDATE_RANGE.CY","ESDATE_RANGE.PY","ESDATE_RANGE.CFP","ESDATE_RANGE.SSFYUTD","ESDATE_RANGE.SFYTEFP","ESDATE_RANGE.PFP","ESDATE_RANGE.SLFPUTD","ESDATE_RANGE.SFYULFP"]),
esComplexParamFunctionOptions=[{caption:"=",value:"EQ"},{caption:"<>",value:"NE"},{caption:"<",value:"LT"},{caption:"<=",value:"LE"},{caption:">",value:"GT"},{caption:">=",value:"GE"},{caption:"[]",value:"RANGE"},{caption:"Κενό",value:"NULL"},{caption:"Μη κενό",value:"NOTNULL"}],_.map(esComplexParamFunctionOptions,function(a){a.caption=esOperTrans["ESCOMPLEX."+a.value]}),esDateRangeOptions=[{dValue:"0",dType:0,title:esOperTrans["ESDATE_RANGE.SDR"]},{dValue:"1",dType:1,title:esOperTrans["ESDATE_RANGE.SD"]},{dValue:"ESDateRange(SpecificDate, #9999/01/01#, SpecificDate, #1753/01/01#)",dType:2,title:esOperTrans["ESDATE_RANGE.ANY"]},{dValue:"ESDateRange(Day)",dType:3,title:esOperTrans["ESDATE_RANGE.TODAY"]},{dValue:"ESDateRange(SpecificDate, #1753/01/01#, Day, 0)",dType:4,title:esOperTrans["ESDATE_RANGE.UTD"]},{dValue:"ESDateRange(Day, 0, SpecificDate, #9999/01/01#)",dType:5,title:esOperTrans["ESDATE_RANGE.SFTD"]},{dValue:"ESDateRange(Day, -1)",dType:6,title:esOperTrans["ESDATE_RANGE.YTD"]},{dValue:"ESDateRange(SpecificDate, #1753/01/01#, Day, -1)",dType:7,title:esOperTrans["ESDATE_RANGE.UTYD"]},{dValue:"ESDateRange(Day, 1)",dType:8,title:esOperTrans["ESDATE_RANGE.TMR"]},{dValue:"ESDateRange(Day, 1, SpecificDate, #9999/01/01#)",dType:9,title:esOperTrans["ESDATE_RANGE.SFTR"]},{dValue:"ESDateRange(Week)",dType:10,title:esOperTrans["ESDATE_RANGE.CW"]},{dValue:"ESDateRange(Week, -1)",dType:11,title:esOperTrans["ESDATE_RANGE.PW"]},{dValue:"ESDateRange(Week, 1)",dType:12,title:esOperTrans["ESDATE_RANGE.NW"]},{dValue:"ESDateRange(Month)",dType:13,title:esOperTrans["ESDATE_RANGE.CM"]},{dValue:"ESDateRange(Month, 0, SpecificDate, #9999/01/01#)",dType:14,title:esOperTrans["ESDATE_RANGE.SFM"]},{dValue:"ESDateRange(SpecificDate, #1753/01/01#, Month, 0)",dType:15,title:esOperTrans["ESDATE_RANGE.UEM"]},{dValue:"ESDateRange(Month, -1)",dType:16,title:esOperTrans["ESDATE_RANGE.PM"]},{dValue:"ESDateRange(Month, -1, SpecificDate, #9999/01/01#)",dType:17,title:esOperTrans["ESDATE_RANGE.SFLM"]},{dValue:"ESDateRange(SpecificDate, #1753/01/01#, Month, -1)",dType:18,title:esOperTrans["ESDATE_RANGE.UELM"]},{dValue:"ESDateRange(Quarter)",dType:19,title:esOperTrans["ESDATE_RANGE.CQ"]},{dValue:"ESDateRange(Quarter, -1)",dType:20,title:esOperTrans["ESDATE_RANGE.PQ"]},{dValue:"ESDateRange(SixMonth)",dType:21,title:esOperTrans["ESDATE_RANGE.CSM"]},{dValue:"ESDateRange(SixMonth, -1)",dType:22,title:esOperTrans["ESDATE_RANGE.PSM"]},{dValue:"ESDateRange(Year)",dType:23,title:esOperTrans["ESDATE_RANGE.CY"]},{dValue:"ESDateRange(Year, -1)",dType:24,title:esOperTrans["ESDATE_RANGE.PY"]},{dValue:"ESDateRange(FiscalPeriod)",dType:25,title:esOperTrans["ESDATE_RANGE.CFP"]},{dValue:"ESDateRange(FiscalYear, 0, Day, 0)",dType:26,title:esOperTrans["ESDATE_RANGE.SSFYUTD"]},{dValue:"ESDateRange(FiscalYear, 0, FiscalPeriod, 0)",dType:27,title:esOperTrans["ESDATE_RANGE.SFYTEFP"]},{dValue:"ESDateRange(FiscalPeriod, -1)",dType:28,title:esOperTrans["ESDATE_RANGE.PFP"]},{dValue:"ESDateRange(FiscalPeriod, -1, Day, 0)",dType:29,title:esOperTrans["ESDATE_RANGE.SLFPUTD"]},{dValue:"ESDateRange(FiscalYear, 0, FiscalPeriod, -1)",dType:30,title:esOperTrans["ESDATE_RANGE.SFYULFP"]}]});var _esSupportedLanguages=[{id:"el-GR",title:"Ελληνικά (GR)",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAE3SURBVHjapJOxSgNBEEDfspsoiSaSIgat5CwsRCT2goqNnb9h4S+olSiWFjZWthYKaiUJaH7A6kRitJEjigiJXsjlzrGJuSJBueQ1y7Izw5vdHSUiDIIC4sBIe42CB3waIL10VHil6VPYXAVg+fAaYhq+/7YrbqxkDZAMGi0WJsY6B/PZFCqmWZ/N9VQW4K32RRGSCrBEpNxX/0pNG4AgCNBadwWsHd/0TMwk4jy/1zp7a2brVBb3r+SXue0zye9dyl+4riuAZQBaBJTrjU7FR7eJ8QNyO+co1W2QGo5hWmG85TiORMVxnNAgf3CByYzjev7/NyeQGDL4H9XQwLbtyAa2bYcGJ7d3TFWbkZ7w6eEeAAN4u6UKlCr9fAVPAWlgEhiNmFwHXhSg24OkIxYIAE8NOs4/AwC7uO3xQbABsAAAAABJRU5ErkJggg=="},{id:"en-US",title:"English (US)",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAFuSURBVHjapJM/SEJRGMV/Lx9lWGoENjhkOCVBBUYRUUNZ0aBE2VbQHOLaoBA4GrRGEIoIgdLQ1GASGlTjW2oI4U06GCTRH8yQ2yKKPIdeHbj8uMN37uHjHkkIwX8kAd1AX4N6VAPeZcDi8RyV/f4Z0ul7OtF/dtjRYeD63CYBjuPjW7VQKLKw4CKXe9QwGt3sHF+SRmTAkEzeEAyuEovn8XndxON5vF43sVgOn2+K1/XdtsGuwQG+H54ADDLAxsY0qdQdK8sTJBJ5trZm27hzFdO8Xq/XQZaRAU5PswQCa5ycZNnentfwZXyxPbrVwmf5uXl3HhxciOHhfREOXwqrNahhJ1UqFQE4AZx2+56IRDLCbA6IUOhSw3Kvo+0828bEw5CrZaCqqtArVVUF4JQBSqNzmIwmRPXrd7/P2EOp+tHagaIouhMoitJMUCtPLpH5WxVqEmAB7EC/zuE3oCgBhkaRDDoN6kBN+m+dfwYAI5QcdaFOn+AAAAAASUVORK5CYII="},{id:"ro-RO",title:"Românesc (RO)",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAFTSURBVHjapJM9TgMxEEafs5sgSEgEBUJwBAQNJ+AaVNyJI0BLRc8NEIgaQVIAEgKym0Ra/+x6KIhiO9BEWBpZn2w/fx7PKBHhP0MBHaA3n1cZFpjlwODk7PJ9efXm/CLRb6e9X4S966udHOg2jef4YDddzY4SuXa4HpkWzP0DQDcHMusaJjPDZ1GFE34IyOKQG3UDe3sLcQ4gywGMdYwnmvFEB4AUiQNf1EG0WtTGAJADVJXho6gop4bFr0ixsAvgyyYYAlylY0DF46ihnJroyqfEgXseBAP9PlWeBYDWGslzfFITPk1qE7S4Gu1sBDCGjA28jwASAwR80Kp2mJ8k0gIwusJ7Qc1frRbfFYUKIV7QNkqitZaOFzrtLKrRpcLstIMf8RgbnmBFPNOvYbL/9q5M9Gvp/yxnBQyAfWBzxV6YAi8KyOaNlK0IaACr/tvO3wMAJOGiBWzsFlIAAAAASUVORK5CYII="},{id:"bg-BG",title:"Bulgară (BG)",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAADmSURBVHjapJM9TsQwEIW/SeIsIUCklaBBXAWuxFnoqDkOHRegQEgIpAUWlMTD2kNBoixdfl4zcvG+8dhvxMxYIgFy4KirU6TAdwZUZvY6q7vIWQKUCyYoEyBdAEgTgBDCZGfvyQCu7q45rdZsfY1hey8s/869qlXJ2+dmADSt59Fe2Go9qvtJfkjqbR9Qk7gV0eIowC7u0NYPgNubey5cTmyaUYCkKHj6US57QKuKZQ5ERgHMjFZ1uIH3Hg4KxLlxXxDjn6cDaDDj4eN9Tg5UgAo4B44nmr+AZ+mSmM9IZABUlq7z7wChM1nCssShPAAAAABJRU5ErkJggg=="}];ESPropertySet.prototype.getSections=function(){var a=this.ps;return a&&a.Lines?_.groupBy(a.Lines,"Category_Code"):[]};var dDateRangeClass={6:[0,1,2,3,6,8,10,11,12,13,16,19,20,21,22,23,24],20:[0,1,25,26,27,28,29,30]},getLocale=function(){var a=window.esLoginLanguage,b=esClientSession;return b&&b.connectionModel&&b.connectionModel.LangID&&(a=b.connectionModel.LangID),a},dateRangeResolve=function(a,b){var c=_.find(esDateRangeOptions,{dType:2}),d=c?c.title:"Any Date";if(!a||!a.dRange)return d;var e=new Date,f=e.getFullYear(),g=e.getMonth(),h=_.find(esDateRangeOptions,{dValue:a.dRange});if(!h)return d;var i=getLocale();switch(h.dType){case 0:if(!angular.isDate(a.fromD)&&!angular.isDate(a.toD))return d;var j="";angular.isDate(a.fromD)&&(j=a.fromD.toLocaleDateString(i)),j+=" - ";var k="";return angular.isDate(a.toD)&&(k=a.toD.toLocaleDateString(i)),j+=k;case 1:return angular.isDate(a.fromD)?a.fromD.toLocaleDateString(i):d;case 2:return h.title;case 3:return e.toLocaleDateString(i)+" ("+h.title+")";case 4:return"-> "+e.toLocaleDateString(i)+" ("+h.title+")";case 5:return e.toLocaleDateString(i)+" -> ("+h.title+")";case 6:return e.setDate(e.getDate()-1),e.toLocaleDateString(i)+" ("+h.title+")";case 7:return e.setDate(e.getDate()-1),e.toLocaleDateString(i)+" -> ("+h.title+")";case 8:return e.setDate(e.getDate()+1),e.toLocaleDateString(i)+" ("+h.title+")";case 9:return e.setDate(e.getDate()+1),e.toLocaleDateString(i)+" -> ("+h.title+")";case 10:var l=e.getDay(),m=0==l?6:l-1,n=new Date(e),o=new Date(e);return n.setDate(e.getDate()-m),o.setDate(n.getDate()+6),n.toLocaleDateString(i)+" - "+o.toLocaleDateString(i)+" ("+h.title+")";case 11:e.setDate(e.getDate()-7);var l=e.getDay(),m=0==l?6:l-1,n=new Date(e),o=new Date(e);return n.setDate(e.getDate()-m),o.setDate(n.getDate()+6),n.toLocaleDateString(i)+" - "+o.toLocaleDateString(i)+" ("+h.title+")";case 12:e.setDate(e.getDate()+7);var l=e.getDay(),m=0==l?6:l-1,n=new Date(e),o=new Date(e);return n.setDate(e.getDate()-m),o.setDate(n.getDate()+6),n.toLocaleDateString(i)+" - "+o.toLocaleDateString(i)+" ("+h.title+")";case 13:e.setDate(1);var n=new Date(f,g+1,0);return e.toLocaleDateString(i)+" - "+n.toLocaleDateString(i)+" ("+h.title+")";case 14:return e.setDate(1),e.toLocaleDateString(i)+" -> ("+h.title+")";case 15:var n=new Date(f,g+1,0);return"-> "+n.toLocaleDateString(i)+" ("+h.title+")";case 16:var n=new Date(f,g-1,1),o=new Date(f,g,0);return n.toLocaleDateString(i)+" - "+o.toLocaleDateString(i)+" ("+h.title+")";case 17:var n=new Date(f,g-1,1);return n.toLocaleDateString(i)+" -> ("+h.title+")";case 18:var n=new Date(f,g,0);return"-> "+n.toLocaleDateString(i)+" ("+h.title+")";case 19:var p=g,q=p%3,n=new Date(f,p-q,1),o=new Date(f,p+(3-q),0);return n.toLocaleDateString(i)+" -> "+o.toLocaleDateString(i)+" ("+h.title+")";case 20:var p=g,q=p%3,o=new Date(f,p-q,0),n=new Date(f,o.getMonth()-2,1);return n.toLocaleDateString(i)+" -> "+o.toLocaleDateString(i)+" ("+h.title+")";case 21:var p=g,n=new Date(f,p>=6?6:0,1),o=new Date(f,p>=6?11:5,p>=6?31:30);return n.toLocaleDateString(i)+" -> "+o.toLocaleDateString(i)+" ("+h.title+")";case 22:var n,o,r=f,p=g;return p>=6?(n=new Date(r,0,1),o=new Date(r,5,30)):(n=new Date(r-1,6,1),o=new Date(r-1,11,31)),n.toLocaleDateString(i)+" -> "+o.toLocaleDateString(i)+" ("+h.title+")";case 23:var r=f,n=new Date(r,0,1),o=new Date(r,11,31);return n.toLocaleDateString(i)+" -> "+o.toLocaleDateString(i)+" ("+h.title+")";case 24:var r=f-1,n=new Date(r,0,1),o=new Date(r,11,31);return n.toLocaleDateString(i)+" -> "+o.toLocaleDateString(i)+" ("+h.title+")";default:return h.title}};ESParamVal.prototype.getParameterInfo=function(){return{parameterType:"esGenericParam"}},ESParamVal.prototype.required=function(a){return arguments&&0!=arguments.length?(this.mandatory=!!a,this):this.mandatory},ESParamVal.prototype.getExecuteVal=function(){return this.paramValue},ESParamVal.prototype.clone=function(a){var b=new ESParamVal(a,this.pValue(),this.enumList);return b.required(this.required()),b},ESParamVal.prototype.pValue=function(a){return arguments&&0!=arguments.length?this.paramValue===arguments[0]?!1:(this.paramValue=arguments[0],!0):this.paramValue},ESParamVal.prototype.strVal=function(){var a=this.enumList;if(!a||0==a.length)return this.paramValue?this.paramValue.toString():"";if(!this.paramValue)return"";var b;b=angular.isArray(this.paramValue)?this.paramValue:[this.paramValue];var c=_.reduce(b,function(b,c){var d=_.find(a,{value:c.toString()});return b+(d?d.text:c.toString())+", "},"");return c.substring(0,c.lastIndexOf(", "))},ESBoolParamVal.prototype=Object.create(ESParamVal.prototype),ESBoolParamVal.prototype.clone=function(a){return new ESBoolParamVal(a,this.pValue())},ESBoolParamVal.prototype.getParameterInfo=function(){return{parameterType:"system.int32, mscorlib",controlType:7}},ESBoolParamVal.prototype.strVal=function(){return esYesNoTrans[this.pValue()?"ESUI.BOOLEAN.YES":"ESUI.BOOLEAN.NO"]},ESBoolParamVal.prototype.getExecuteVal=function(){return this.pValue()?1:0},ESNumericParamVal.prototype=Object.create(ESParamVal.prototype),ESNumericParamVal.prototype.clone=function(a){return new ESNumericParamVal(a,this.pValue())},ESNumericParamVal.prototype.getParameterInfo=function(){return{parameterType:"entersoft.framework.platform.esnumeric"}},ESNumericParamVal.prototype.strVal=function(){var a="0",b=this.paramValue.value?this.paramValue.value.toLocaleString(getLocale()):a,c=this.paramValue.valueTo?this.paramValue.valueTo.toLocaleString(getLocale()):a;switch(this.paramValue.oper){case"RANGE":return esOperTrans["ESCOMPLEX.FROM"]+b+esOperTrans["ESCOMPLEX.TO"]+c;case"NULL":return esOperTrans["ESCOMPLEX.NULL"];case"NOTNULL":return esOperTrans["ESCOMPLEX.NOTNULL"];default:return esOperTrans["ESCOMPLEX."+this.paramValue.oper.toString()]+" "+b}},ESNumericParamVal.prototype.getExecuteVal=function(){var a=(this.paramValue.value=this.paramValue.value||0).toLocaleString("el-GR"),b=(this.paramValue.valueTo=this.paramValue.valueTo||0).toLocaleString("el-GR");switch(this.paramValue.oper){case"RANGE":return"ESNumeric("+this.paramValue.oper+", '"+a+"', '"+b+"')";case"NULL":case"NOTNULL":return"ESNumeric("+this.paramValue.oper+", '0')";default:return"ESNumeric("+this.paramValue.oper+", '"+a+"')"}},ESStringParamVal.prototype=Object.create(ESParamVal.prototype),ESStringParamVal.prototype.clone=function(a){return new ESStringParamVal(a,this.pValue())},ESStringParamVal.prototype.getParameterInfo=function(){return{parameterType:"entersoft.framework.platform.esstring, queryprocess"}},ESStringParamVal.prototype.strVal=function(){var a=this.paramValue.value?this.paramValue.value.toString():"",b=this.paramValue.valueTo?this.paramValue.valueTo.toString():"";switch(this.paramValue.oper){case"RANGE":return esOperTrans["ESCOMPLEX.FROM"]+a+esOperTrans["ESCOMPLEX.TO"]+b;case"NULL":return esOperTrans["ESCOMPLEX.NULL"];case"NOTNULL":return esOperTrans["ESCOMPLEX.NOTNULL"];default:return esOperTrans["ESCOMPLEX."+this.paramValue.oper.toString()]+" "+a}},ESStringParamVal.prototype.getExecuteVal=function(){switch(this.paramValue.oper){case"EQ":return this.paramValue.value;case"RANGE":return"ESString("+this.paramValue.oper+", '"+this.paramValue.value+"', '"+this.paramValue.valueTo+"')";case"NULL":case"NOTNULL":return"ESString("+this.paramValue.oper+", '')";default:return"ESString("+this.paramValue.oper+", '"+this.paramValue.value+"')"}},ESDateParamVal.prototype=Object.create(ESParamVal.prototype),ESDateParamVal.prototype.clone=function(a){return new ESDateParamVal(a,this.pValue())},ESDateParamVal.prototype.getParameterInfo=function(){return{parameterType:"entersoft.framework.platform.esdaterange, queryprocess"}},ESDateParamVal.prototype.strVal=function(a){return dateRangeResolve(this.paramValue,a)},ESDateParamVal.prototype.getExecuteVal=function(){var a=this.paramValue.dRange;if("0"==a||"1"==a){var b="#1753/01/01#",c="#9999/01/01#",d=!0,e=moment(this.paramValue.fromD);e.isValid()&&(d=!1,b=e.format("YYYY/MM/DD"));var f=moment(this.paramValue.toD);return f.isValid()&&(d=!1,c=f.format("YYYY/MM/DD")),"0"==a||d?"ESDateRange(SpecificDate, #"+b+"#, SpecificDate, #"+c+"#)":"ESDateRange(SpecificDate, #"+b+"#)"}return this.paramValue.dRange},ESParamValues.prototype.merge=function(a){var b=this;if(a)for(var c in a){if(!a[c]||!a[c]instanceof ESParamVal)throw new Error("Invalid parameter type in merge function in paramvalues");b.hasOwnProperty(c)&&b[c]instanceof ESParamVal?b[c].enumList=a[c].enumList:b[c]=a[c]}return this},ESParamValues.prototype.isValidState=function(){var a=this;for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];if(c instanceof ESParamVal&&c.required()&&!(c.paramValue&&c.getExecuteVal()||angular.isNumber(c.paramValue)&&0==c.paramValue))return!1}return!0},ESParamValues.prototype.setParamValues=function(a){var b=this;for(var c in b)b.hasOwnProperty(c)&&delete b[c];a&&_.isArray(a)&&0!=a.length&&a.forEach(function(a,c,d){b[a.paramCode]=a})},ESParamValues.prototype.getExecuteVals=function(){var a=this,b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];(d.paramValue||angular.isNumber(d.paramValue)&&0==d.paramValue)&&(b[d.paramCode]=d.getExecuteVal())}return b},ESParamValues.prototype.getSerialized=function(){var a=this,b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(d.paramValue||angular.isNumber(d.paramValue)&&0==d.paramValue){var e=d.getParameterInfo();if(!e||!e.parameterType)throw new Error("Parameter cannot be serialized ["+d.paramCode+"]");b.push({id:d.paramCode,value:d.getExecuteVal(),parameterType:e.parameterType,controlType:e.controlType,enumList:d.enumList,required:d.mandatory})}}return b};var esClientSession={hostUrl:"",connectionModel:null,setWebApiToken:function(a,b){a&&angular.isString(a)&&(esClientSession.connectionModel?a!==esClientSession.connectionModel.WebApiToken&&(esClientSession.connectionModel.WebApiToken=a):(esClientSession.connectionModel={},esClientSession.connectionModel.WebApiToken=a))},getWebApiToken:function(){var a=getAuthToken(fgetModel());return a},setModel:fsetModel,getModel:fgetModel},isMobile=function(){var a=!1;return function(b,c){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}();return{requiredEBSVersion:requiredEBSVersion,esConvertGIDtoId:esConvertGIDtoId,esDetectMobileBrowsers:function(){return isMobile},getLocale:getLocale,esConvertIDtoGID:esConvertIDtoGID,rgbToHex:rgbToHex,isEmail:function(a){return a&&/mail/i.test(a)},isPhone:function(a){return a&&(/mobile/i.test(a)||/phone/i.test(a))},getVersion:function(){return esAngularAPIVer},isObjectEmpty:function(a){if(!a)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},esSupportedLanguages:_esSupportedLanguages,suggestESLanguageID:suggestESLanguageID,getMimeTypeForExt:function(a,b){if(!b)return"";var c=b.split("."),d=c[c.length-1].toLowerCase();if(!d)return"";var e=_.find(a,function(a){return-1!=a.extension.indexOf(d)});return e?e.mime:""},getExtensionsForMimeType:function(a,b){if(!b)return[];b=b.toLowerCase();var c=_.find(mimelist,function(a){return a.mime==b});return c?c.extension:[]},setWebApiToken:esClientSession.setWebApiToken,getWebApiToken:function(){return esClientSession.getWebApiToken()},isAuthenticated:function(){return fgetModel(),!!esClientSession.connectionModel},getClientSession:function(){return esClientSession},getUserMessage:getUserMessage,getESUISettings:function(){return esUISettings},ESPublicQueryDef:ESPublicQueryDef,ESMultiZoomDef:ESMultiZoomDef,ESPQOptions:ESPQOptions,ESParamValues:ESParamValues,ESParamVal:ESParamVal,ESNumericParamVal:ESNumericParamVal,ESStringParamVal:ESStringParamVal,ESDateParamVal:ESDateParamVal,ESBoolParamVal:ESBoolParamVal,getesDateRangeOptions:fGetesDateRangeOptions,getesComplexParamFunctionOptions:function(){return esComplexParamFunctionOptions},sessionClosed:function(){esClientSession.setModel(null);try{esCache.clear()}catch(a){}},sessionOpened:function(a,b){try{try{esCache.clear()}catch(c){}a.Model.LangID=a.Model.LangID||(b||{}).LangID||window.esLoginLanguage,a.Model.BranchID=a.Model.BranchID||(b||{}).BranchID||"-",a.Model.Claims=a.Claims,angular.isUndefined(a.IsExternal)?a.Model.IsExternal=a.Claims&&a.Claims.IsExternal:a.Model.IsExternal=a.IsExternal,esClientSession.setModel(a.Model),$log.info("LOGIN User ",a.Model.Name)}catch(d){throw $log.error(d),d}}}}])}(),function(){"use strict";var a=angular.module("es.Services.Web");a.factory("esStackTrace",function(){var a;try{a=printStackTrace}catch(b){a=StackTrace}return{print:a}}),a.provider("$log",function(){function a(){return log4javascript.getLogger("esLogger")}function b(a){d(new log4javascript.BrowserConsoleAppender);var b=angular.isDefined(a)&&a;b&&d(new log4javascript.PopUpAppender)}function c(a,b){if(f){i&&a&&a.connectionModel&&(i.setCustomField("userId",a.connectionModel.UserID),i.setCustomField("branchId",a.connectionModel.BranchID),i.setCustomField("langId",a.connectionModel.LangID));var c=f.getHeaders();if(c){var d,e=-1;for(d=0;d<c.length;d++)if("Authorization"==c[d].name){e=d;break}-1!=e&&c.splice(e,1)}b&&""!=b&&f.addHeader("Authorization",b)}}function d(a){return-1==e.indexOf(a)?(e.push(a),!0):!1}var e=[],f=null,g=null,h=log4javascript.Level.ALL,i=null;return{setLevel:function(a){h=a,g&&g.setLevel(h)},getLevel:function(){return h},getCurrentLevel:function(){return g?g.getEffectiveLevel():log4javascript.Level.OFF},addAppender:d,addDefaultAppenders:b,addESWebApiAppender:function(a,b){var c=a+"api/rpc/EventLog/";return f=new log4javascript.AjaxAppender(c,!1),f.setSendAllOnUnload(!0),i=new log4javascript.JsonLayout,i.setCustomField("subscriptionId",b),f.setLayout(i),f.setWaitForResponse(!0),f.setBatchSize(100),f.setTimed(!0),f.setTimerInterval(6e4),f.addHeader("Content-Type","application/json"),f.setRequestSuccessCallback(function(a){console.log("ES Logger, BATCH of logs upoloaded",a.responseURL,a.status)}),f.setFailCallback(function(a){console.error("Failed to POST Logs to the server",a)}),d(f)},$get:["esMessaging",function(d){try{g=a(),g.setLevel(h),0==e.length&&b();var i=0;for(i=0;i<e.length;i++)g.addAppender(e[i]);return d.subscribe("AUTH_CHANGED",function(a,b){c(a,b)}),g.sendAll=function(){try{f&&f.sendAll()}catch(a){}},console.info("ES Logger started"),g}catch(j){return console.log("Error in starting entersoft logger",j),$log}}]}}),a.provider("$exceptionHandler",function(){var a={pushToServer:!1,logServer:""};return{getSettings:function(){return a},setPushToServer:function(b){a.pushToServer=b},setLogServer:function(b){a.logServer=b},$get:["$log","$window","esStackTrace","$injector",function(b,c,d,e){function f(f,g){var h,i,j;try{var k=e.get("esMessaging");k.publish("ES_HTTP_CORE_ERR",f),h=f.toString(),i=d.print({e:f}),j={errorUrl:c.location.href,errorMessage:h,stackTrace:i,cause:g||""},b.error(JSON.stringify(j,null,"	"))}catch(l){console.log(arguments)}if(a.pushToServer)try{var m=e.get("esWebApi");m.registerException(j,a.logServer)}catch(l){b.warn("ES Error in registerException on store "+a.logServer),b.error(l)}}return f}]}})}();